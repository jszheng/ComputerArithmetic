# 第一版序言

## 计算机算术的背景

在过去20年间，计算机体系结构的进步使得数字计算机硬件的性能持续呈指数级增长，尽管在电路层提高速度的技术难度在不断提高。如果没有理论上的洞察力、实验研究和工具构建的努力，这种现象级的增长速度是不可能的，这些努力有助于将计算机体系结构从一门艺术转变为计算机科学和工程中最量化的一个分支，且预计在不久的将来也会继续下去。对不同形式的并发性的理解，以及具备合理有效性并且用户友好的编程模型的发展，是这一成功故事的关键推动因素。

处理器性能成本增长背后的问题是硬件和软件复杂性的空前增加。复杂化的趋势不仅与可测试性和可验证性相抵触，还阻碍了可适应性、性能调整，以及各种权衡的评估，所有的这些最终导致了开发成本的飙升。当前和未来的计算机设计所面临的一个关键挑战是：需要通过去除一层又一层的复杂性来扭转这一趋势。在选择简洁、稳健、易于验证的设计同时，还要继续尝试新的设计方法。应当从较简单的电路中获得性能与易用性的好处，并能随时适应应用的需求。

在计算机设计者对用户友好性、紧凑性、简单性、高性能、低成本和功耗的追求中，计算机算术起到了关键作用。它是计算机体系结构中最古老的子领域之一。早期数字计算机的大部分硬件开销都来自累加器和其它算术/逻辑电路中。因此，第一代计算机设计者的动机是在可能的范围内尽可能简化和共享硬件，并在提出方案前进行详细的性价比分析。我们今天使用的许多巧妙的设计方法实际上都源自于30～50年前笨重、耗电的机器中。

实际上，计算机算术如今已经非常成功了，以至于有时会变得非常透明。就复杂性而言，如今的算术电路早已不再占据主导地位；寄存器、存储器和粗出气管理、指令发射逻辑和流水线控制逻辑才是当今处理器芯片面积的主要消费者。算术电路的正确性与高性能是人们通常的预期，像1990s英特尔奔腾的除法错误这样的事件实际上很少发生。

前面所述的情况正在转变，这里有几个原因。首先，在极高的时钟频率下，算术电路和处理器其它部分间的接口开始变得非常关键。算术单元也不再能被孤立地设计和验证了。相反，需要进行综合的设计与优化，这使得开发工作变得更加复杂且昂贵。其次，还要利用新技术的优势优化算术电路以满足设计目标，并能容忍弱点，这使得我们需要对现有的设计模式进行重新审视。最后，将更高级别的算术基础单元纳入硬件，使得设计、优化和验证工作变得高度复杂，且相互关联。

这便是计算机算术在如今仍具活力的原因。这个领域的设计者和研究人员以惊人的规律性产生了新的结构。超前进位加法器就是一个典型的例子：在不远的过去，我们曾认为我们知道所有关于超前进位加法器的知识。然而，新的设计、改进和优化仍在不断出现。IEEE 754标准浮点格式消除了许多有关浮点计算兼容性与误差控制的但又，从而产生了许多对大众市场具有吸引力的新设计与产品。鉴于许多新应用场景（如加密、错误检测和多媒体）都具有算术密集性的特点，计算机算术在未来几年仍将继续蓬勃发展。

## 本书的目的与结构

计算机算术这一领域已经发展成熟，已经有十几篇材料和参考书被出版了。其中一些涉及计算机算术的一般书籍（相对于特殊应用或高级/非常规方法）被列在了序言的最后（参考文献索引请见原书序言末）。这些书的每一本都具有独特的优势，且对该领域的形成和发展做出了贡献。本书，《Computer Arithmetic: Algorithms and Hardware Designs》就是坐着多年来开发并完善的讲义的产物。以下是本书与所列书籍相比，最重要的特点：

1.  **材料章节按照讲座的规模划分：**在我的教学方案中，一个讲座或多或少是一个独立的模块，其与过去的讲座有联系，且会指出未来会发生什么。每个讲座都必须有一个主题或标题，且必须从动机到细节再到结论。在设计文本时，我努力将材料分为几章，每章都适合用于一个讲座（1～2小时）。简短的讲座可以仅涵盖其中前面几个小节，而较长的讲座则可处理知识或方法的变种、次要的思想或接近章末时的高级材料。为使结构具有层次性（而不是扁平或线性的），本书一共被分为了七个部分，每个部分由四章组成，每章对应一个讲座，涵盖该领域的一个方面（见图P.1，在本文后面请往下翻）。
2.  **强调基础理论与硬件设计：**处理复杂问题的能力既需要包括计算机算术理论基础的深刻理解，也需要帮助我们理解理论的设计实例。这些设计也同时为综合提供了构建块，并在 成本-性能 比较方面提供了参考点。这种观点反映在，例如，通过对冗余数字表示和相关算术的详细了解（第3章），可以使我们对后面各种乘法器设计和实时算术得到更好的理解。另一个例子见于第22章，其从更直观的几何学角度介绍了坐标旋转数字计算机，或者CORDIC算法。
3.  **将计算机算术与计算机其它子领域联系：**计算机算术常受计算机体系结构和其它子领域的字样，同时也能反过来滋养这些领域。这种联系的例子比比皆是。例如对于超前进位加法器，我们可以意识到其进位计算实际上就是并行前缀计算的一个特例，而并行前缀计算已经被并行计算的研究者做出了广泛地研究。神经网络的算术则是一个仍在探索的领域。剩余数系统（residue number system）为复杂性理论和高速算术的极限感兴趣的研究员，以及容错数字系统的设计者提供了一个宝贵的工具。
4.  **广泛涵盖了重要主题：**本书几乎涵盖了计算机算术的所有重要算法和硬件设计主题，从而为该领域提供了一个平衡且完整的视角。涵盖内容包括非常规数字表示方法（3,4章）、越来越重要的查找表算术（24章）、容错和可验证算术（19,20章）、以及第七部分（25～28章）的主题，这些内容在其它教材中并没有全部出现。
5.  **全书采用，并尽可能地使用统一且一致的符号与术语：**例如，本书中 $r$r 总是代表数字表示的基数（radix），或者处罚和平方根中的余数。虽然其它作者在他们文章的基本部分中也都基本这样做了，但许多人仍倾向于在高级研究主题中简单地借用参考资料中的符号和术语。这种方法的好处是使得原书和参考资料间的过度更容易，但对大多数学生来说，这完全是一种迷惑，他们依赖原书，除非写论文，并不会去参考原始参考资料。

## 主题摘要 

本书包括七个部分每部分由四章组成，它们的写作动机分别如下：

1.  第一部分：提供一个台阶，以让我们领略接下来的内容，并详细地介绍定点数的各种表示方法。包括对有符号数、冗余数表示、剩余数表示的详细讨论。
2.  第二部分：包括加法和减法，它们构成了最基本的算术构建，常用于实现其它算术运算。讨论内容包括常数的加法（计数器），高速加法器的各种设计，以及多操作数加法器。
3.  第三部分：这部分专门讨论乘法，从基本的移位/加法算法开始，到高基、树形、阵列、位串行、模乘法和其它各种乘法，此外还讨论了平方这种特殊情况。
4.  第四部分：包括除法算法及其硬件实现，从最基本的移位/减法算法开始，到高基、预缩放、模除法、阵列、收敛除法。
5.  第五部分：涉及实数算术，包括表示实数的各种方法、浮点算术、表示与计算中的误差，以及高精度和可验证算术。
6.  第六部分：涉及函数求值，从平方根求值开始，然后是CORDIC算法，接着是一般的收敛和近似方法，包括基于查找表的方法。
7.  第七部分：广泛地讨论了设计和实现方面的主题，包括流水线、低功耗和容错算术。这部分的最后一章还提供了历史角度和实际计算机中算术单元的例子。

## 本书的阅读指南

对于教学使用，本书的每章主题都可在1～2小时的讲座中涵盖。在作者自己的教学中，每章分别被用于1.5小时的讲座，每周2次，为期10轴，且省略或合并了部分章节，以便将材料纳入18～20次讲座。但本文的模块化结构也适用于其它讲座形式、自学或从业人员对该领域的回顾。在后两种情况，读者可把每章看作是一个学习单元（比如一周），而不是一个讲座。理想情况下，读者进入下一章前，每章的所有主题都应被覆盖。在授课时间较少的情况下，一些位于章节末尾的小节可以被省略，或者仅介绍动机与关键结果。

每章都提供了不同复杂程度的问题，从简单地数字例子或联系到要求更高的研究或小型项目。这些问题是本书不可分割的一部分：它们不是为了使本书在使用时更具吸引力而事后添加的。全书包括464个问题（每章15～18个）。假设每周有两次讲座，则可每周或每两周布置一次作业，每次作业都以相应的一半（2章）或全部（4章）部分的具体内容作为标题。

这里也为教师提供解答手册。作者在UCSB的ECE 252B课程的详细教学大纲可在下网址找到：

http://www.ece.ucsb.edu/~parhami/ece_252b.htm

一个用于对各种算术算法进行数值实验的模拟器则可在下网址找到：

http://www.ecs.umass.edu/ece/koren/arith/simulator/

由Israel Koren教授提供。

每章末尾都列出了计算机算术的经典论文、关键设计思想和重要的最新研究贡献的参考文献。这些参考文献为深入研究或学期论文或者项目提供了良好的七点。大量的经典论文和计算机算术中的重要贡献已在两卷中重印\[Swar90\]。

计算机算术领域的新想法会出现在被称为 ARITH-n 的会议中，两年一次，在奇数年矩形\[ARIT\]。其它会议包括：

-   Asilomar Conference on Signals, Systems, and Computers \[Asil\]
-   International Conference on Circuits and Systems \[ICCS\]
-   Midwest Symposium on Circuits and Systems \[MSCS\]
-   International Conference on Computer Design \[ICCD\]

相关期刊包括IEEE Transactions on Computers\[TrCo\]，特别是其中有关计算机算术的期刊：

-   IEEE Transactions on Circuits and Systems\[TrCS\]
-   Computers & Mathematics with Applications\[CoMa\]
-   IET Circuits, Devices & Systems\[CDS\], IET Computers & Digital Techniques\[CDT\]
-   IEEE Transactions on VLSI Systems\[TrVL\]
-   Journal of VLSI Signal Processing \[JVSP\]

